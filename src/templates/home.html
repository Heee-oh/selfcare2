<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>March</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet"href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    

    <style>
      .bottom {
  height: 80px; 
  border-top: 1px solid #000; 
}
  .top {
    height: 50px; 
    border-bottom: 1px solid #000; 
  }
  .top a {
    text-align: center;
  }

  #date {
    margin-top: 100px; 
}
.rounded-box {
    position: relative;
    width: 95%; 
    height: 200px;
    background-color: #f0f0f0; 
    border-radius: 20px; 
    margin-top: 30px;
    margin-left: auto;
    margin-right: auto;
    display: block;
}
.plus {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

#top10 {
    flex-direction: row; 
    align-items: center;
    margin-left: 30px;
    margin-top: 20px; /* Adjust as needed */
    margin-bottom: 1px; /* Adjust as needed */
}

#top10 img {

    margin-left: 50%; /* Adjust as needed */
    right: 40%;
}

.card {
    margin-top: 20px;
    margin-left: 20px;
}



.feed_box {
    background-color: white;
    width: 95%;
    margin-left: 2.5%;
    margin-top: 15px;
    margin-bottom: 5px;
    min-height: auto;
    padding-bottom: 10px;
    border-radius: 15px;
    
}

.feed_img{
  
    width: 100%;
    object-fit: contain;
}

.feed_content{
  
    padding: 0px 10px;
}

.feed_like{
    padding: 0px 10px;
}

.feed_reply{
    padding: 0px 10px;
    display: flex;
    flex-direction: column;
}


.feed_txt{
    font-size: 14px;
}



.feed_icon{
    padding: 5px 5px 0px 5px;
    display: flex;
    justify-content: space-between;
}span{
     padding-right: 5px;
}

.feed_name{
    padding: 10px;
    display: flex;
    align-items: center;
}

.feed_name_txt{
    font-size: 14px;
    padding: 0px 10px;
    font-weight: bold;
}

.profile_box {
    width: 40px;
    height: 40px;
    border-radius: 70%;
    overflow: hidden;
}
.profile_img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.name_content{
    display: flex;
    flex-direction: column;
}

.name_content_txt{
    font-size: 12px;
    padding: 0px 10px;
    font-weight: bold;
    color: lightgray;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 190px;
}

.big_profile_box {
    width: 60px;
    height: 60px;
    border-radius: 70%;
    overflow: hidden;
}

.link_txt{
    font-size: 14px;
    font-weight: bold;
    cursor: pointer;
    text-decoration: none;
}

.recommend_box {
    display: flex;
    justify-content: space-between;
    padding: 5px;
    font-size: 14px;
    font-weight: bold;
    align-items: center;
}

.comment_box{
    margin: 40px 0 0 5px;
    font-size: 12px;
    font-weight: bold;
    color: lightgray;
    display: flex;
    flex-direction: column;
}

.top {
  background-color: whitesmoke;
  height: 80px;
  }

  .top p {
    font-size: 20px;
    font-weight: bold;
  }

  .bottom {
  height: 80px; 

  background-color: whitesmoke;
}

.bi-three-dots {
  width: 30px;
  height: 20px;
}

.tag_size {
  font-size: 12px;
  margin-left: 5px;
}
</style>
</head>
<body>
  
  <nav class="navbar fixed-top top">
    <div class="container-fluid">
      <a class="navbar-brand" href="/test">기록</a>


      <div class="ms-auto"> 
        <a class="navbar-brand" href="#">
          <img src="../static/icon/알람.png">
        </a>
        <a class="navbar-brand" href="#">
          <img src="../static/icon/설정.png">
        </a>
      </div>

    </div>
    

  
  </nav>

  <div class="container-fluid">
    <h5 id="date"></h5>
  </div>

  
{% if record is not none %}

<div class="border feed_box" id="{{ record.mr_id }}">
  <div class="feed_name d-flex justify-content-between">
    <p class="tag_size">
      {% for situation in record.situation.split(',') %}
      #{{ situation.strip() }}
      {% endfor %}
      {% for keyword in record.keyword.split(',') %}
        #{{ keyword.strip() }}
      {% endfor %}
    </p>

      <div class="dropdown">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
        </svg>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <a class="dropdown-item" id="delete-post">Delete</a>
        </div>
      </div>

  </div>
  <div class="feed_content mt-3">
      <p class="feed_txt" style="margin-left: 5px;">{{ record.content }}</p>
      <p class="feed_txt" style="margin-left: 5px;">{{ record.happy }}</p>
  </div>

</div>
{% else %}
<div class="container-fluid" onclick="window.location.href='/test1'" id="today_log">
  <div class="rounded-box">
      <img src="../static/icon/플러스.png" class="plus" >
  </div>
</div>

{% endif %}


<div class="row">
  <div class="col-sm-3 mb-2">
      <a href='/survey' class="btn btn-secondary btn-block">설문조사(번아웃 증후군)</a>
  </div>
  <div class="col-sm-3 mb-2">
      <a href='/survey_stress' class="btn btn-secondary btn-block">설문조사(외상 후 스트레스)</a>
  </div>
  <div class="col-sm-3 mb-2">
      <a href='/survey_relation' class="btn btn-secondary btn-block">설문조사(관계중독)</a>
  </div>
  <div class="col-sm-3 mb-2">
      <a href='/survey_panic' class="btn btn-secondary btn-block">설문조사(공황장애)</a>
  </div>
</div>


<div id="top10">오늘의 TOP10 기록 
  <img src="../static/icon/오른쪽방향.png">
</div> 


  <!-- If we need pagination -->
  <div class="swiper-pagination"></div>
  
  <!-- If we need scrollbar -->

</div>



  <div class="swiper mySwiper">
    <div class="swiper-wrapper" >
        
      {% for record_top in like_records %}
      
      <div class="swiper-slide" id="{{record_top.mr_id }}">
        <div class="card" style="width: 25rem; max-width: 25rem; max-height: 50rem; overflow: auto;" id="{{ record_top.mr_id }}">
          <div class="card-body">
            <h6 class="card-subtitle mb-2 text-body-secondary">
              {% for situation in record_top.situation.split(',') %}
              #{{ situation.strip() }}
              {% endfor %}

            </h6>
            <p class="card-text" style="display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis;">{{ record_top.content }}</p>
            <a class="card-link">기록 더 자세히 보기 </a>
          </div>
        </div>
      </div>
      {% endfor %}

      <!-- <div class="swiper-slide">

        <div class="card" style="width: 25rem; max-width: 25rem; max-height: 50rem; overflow: auto;">
          <div class="card-body">
            <h5 class="card-title">제목</h5>
            <h6 class="card-subtitle mb-2 text-body-secondary">태그</h6>
            <p class="card-text" style="display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis;">안녕하세요 기록입니다. 기록이기 때문입니다.안녕하세요 기록입니다. 기록이기 때문입니다.안녕하세요 기록입니다. 기록이기 때문입니다안녕하세요 기록입니다. 기록이기 때문입니다.안녕하세요 기록입니다. 기록이기 때문입니다.안녕하세요 기록입니다. 기록이기 때문입니다.</p>
            <a class="card-link">기록 더 자세히 보기 </a>
          </div>
        </div>
      </div>
      <div class="swiper-slide">  
        <div class="card" style="width: 25rem; max-width: 25rem; max-height: 50rem; overflow: auto;">
        <div class="card-body">
          <h5 class="card-title">제목</h5>
          <h6 class="card-subtitle mb-2 text-body-secondary">태그</h6>
          <p class="card-text" style="display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis;">안녕하세요 기록입니다. 기록이기 때문입니다.안녕하세요 기록입니다. 기록이기 때문입니다.안녕하세요 기록입니다. 기록이기 때문입니다안녕하세요 기록입니다. 기록이기 때문입니다.안녕하세요 기록입니다. 기록이기 때문입니다.안녕하세요 기록입니다. 기록이기 때문입니다.</p>
          <a class="card-link">기록 더 자세히 보기 </a>
        </div>
        </div>
      </div>
      <div class="swiper-slide">  
        <div class="card" style="width: 25rem; max-width: 25rem; max-height: 50rem; overflow: auto;">
        <div class="card-body">
          <h5 class="card-title">제목</h5>
          <h6 class="card-subtitle mb-2 text-body-secondary">태그</h6>
          <p class="card-text" style="display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis;">안녕하세요 기록입니다. 기록이기 때문입니다.안녕하세요 기록입니다. 기록이기 때문입니다.안녕하세요 기록입니다. 기록이기 때문입니다안녕하세요 기록입니다. 기록이기 때문입니다.안녕하세요 기록입니다. 기록이기 때문입니다.안녕하세요 기록입니다. 기록이기 때문입니다.</p>
          <a class="card-link">기록 더 자세히 보기 </a>
        </div>
        </div>
      </div> -->
    </div>
    <div style="margin-top: 40px;"></div>
    <div class="swiper-pagination"></div>
  </div>
  


  


  <nav class="navbar fixed-bottom bottom">
    <div class="container-fluid">
      <a class="navbar-brand" href="/test1">
        <img src="../static/icon/record.png">
    </a>
    <a class="navbar-brand" href="/community">
      <img src="../static/icon/커뮤니티.png">

    </a>
    <a class="navbar-brand" href="#">
      <img src="../static/icon/도움닫기.png">
    </a>
    <a class="navbar-brand" href="/">
      <img src="../static/icon/마이.png">
    </a>
      
      

  </nav>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
      
      var swiper = new Swiper(".mySwiper", {
      spaceBetween: 40,   // slide 사이의 간격
      autoplay: {
      delay: 2000,   // 자동 슬라이드 지연 시간
      },

      pagination: { // 페이징 설정
        el: ".swiper-pagination",
        clickable: true,
      },
      
    });

    var days = ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'];
    var date = new Date();
    var dayName = days[date.getDay()];
    var day = date.getDate();
    var month = date.getMonth() + 1; // JavaScript counts months from 0 to 11
    document.getElementById('date').innerHTML = month + '월 ' + day + '일 ' + dayName;
    

    document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('delete-post').addEventListener('click', function(e) {
      e.preventDefault();
      var postId = this.closest('.feed_box').id; // Get the ID of the post
      fetch('/delete/' + postId, { // Update this URL with your delete route
        method: 'DELETE',
      })
      .then(console.log(postId))
      .then(response => response.json())
      .then(data => {
      // Remove the post from the DOM
        document.getElementById(postId).remove();
        window.location.reload();
        document.getElementById('today_log').style.display = 'block';
      });
    });
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</body>

</html>